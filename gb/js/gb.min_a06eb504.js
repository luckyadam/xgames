"use strict";PP.define("gb/widget/audio_player",function(t,i,o){var e=_.Class.extend({statics:{PAUSED:0,PLAYING:1},construct:function(t){this.conf=$.extend({src:null,loop:"loop",type:"audio/mpeg",autoplay:!0,preload:!0},t),this.init()},init:function(){var t=this.conf;this.audio||(this.audio=new Audio),t.src&&(this.audio.src=t.src),this.audio.loop=t.loop,this.audio.type=t.type,this.audio.autoplay=t.autoplay,this.audio.preload=t.preload,this.audio.autoplay?this.status=e.PLAYING:this.status=e.PAUSED},togglePlay:function(){this.status===e.PLAYING?this.pause():this.play()},play:function(){this.status=e.PLAYING,this.audio&&this.audio.pause(),this.audio&&this.audio.play()},pause:function(){this.status=e.PAUSED,this.audio&&this.audio.pause()},stop:function(){this.status=e.PAUSED,this.audio.currentTime=0,this.pause()},setSrc:function(t,i){this.audio&&(this.stop(),this.audio.src=t,i&&(this.audio.type=i))},getStatus:function(){return this.status},destroy:function(){this.audio.pause(),this.audio=null}});o.exports=e}),PP.define("gb/widget/top_player",function(t,i,o){var e=t("gb/widget/audio_player"),s=_.Class.extend({construct:function(t){this.conf=$.extend({$el:null,src:null},t),null!==this.conf.src&&this.init()},init:function(){this.player=new e({src:this.conf.src}),this.setStyle(),this.initEvent()},setStyle:function(){var t=$(".top_player_btn",this.conf.$el);this.player.getStatus()===e.PLAYING?t.removeClass("off").addClass("on"):t.removeClass("on").addClass("off")},initEvent:function(){this.conf.$el.on("touchend",".top_player_btn",$.proxy(this.togglePlay,this))},togglePlay:function(){this.player.togglePlay(),this.conf.$el.toggleClass("stop"),this.setStyle()}});o.exports=s}),PP.define("gb/widget/countdown",function(t,i,o){var e=_.Class.extend({statics:{COUNTING:0,PAUSED:1},construct:function(t){this.conf=$.extend({start:15,end:0,$el:null},t),this.init()},init:function(){var t=this.conf,i=t.$el;this.$timeNum=i.find(".countdown_num"),this.$pieLeft=i.find(".countdown_bg_left"),this.$pieRight=i.find(".countdown_bg_right"),this.$timeNum.text(t.start),this.rotationAngle=0,this.originTime=t.start,this.totalTime=10*t.start,t.start<10&&(t.start="0"+t.start),this.countMs=10,this.countCircle=0,this.timer=null,this.listenEvent()},listenEvent:function(){_.eventCenter.on("gb_widget_countdown:start",$.proxy(this.start,this)),_.eventCenter.on("gb_widget_countdown:pause",$.proxy(this.pause,this)),_.eventCenter.on("gb_widget_countdown:reset",$.proxy(this.reset,this))},start:function(){this.status=e.COUNTING;var t=this.conf;setTimeout($.proxy(function i(){return this.totalTime-=1,this.totalTime<0?(this.$timeNum.text("00"),clearTimeout(this.timer),void _.eventCenter.trigger("gb_widget_countdown:timeisup")):(this.totalTime>=0&&this.countMs>0&&this.countMs--,0===this.countMs&&t.start>0&&(this.countMs=10,t.start--,t.start<10&&(t.start="0"+t.start),_.eventCenter.trigger("gb_widget_countdown:timedown",parseInt(t.start,10))),this.$timeNum.text(t.start),this.rotationAngle=this.rotationAngle+360/(10*this.originTime),this.countCircle+=1,this.countCircle<=this.originTime/2*10?(this.$pieLeft.css("-webkit-transform","rotate("+this.rotationAngle+"deg)"),this.$pieLeft.css("transform","rotate("+this.rotationAngle+"deg)")):this.$pieRight.css({"background-color":"#b1ffec","-webkit-transform":"rotate("+this.rotationAngle+"deg)",transform:"rotate("+this.rotationAngle+"deg)"}),void(this.timer=setTimeout($.proxy(i,this),100)))},this),100)},pause:function(){this.status=e.PAUSED,clearTimeout(this.timer)},reset:function(){var t=this.conf;clearTimeout(this.timer),t.start=this.originTime,this.$timeNum.text(t.start),this.rotationAngle=0,this.totalTime=10*t.start,t.start<10&&(t.start="0"+t.start),this.countMs=10,this.countCircle=0,this.timer=null,this.$pieLeft.css("-webkit-transform","rotate(0deg)"),this.$pieLeft.css("transform","rotate(0deg)"),this.$pieRight.css({"background-color":"#fff","-webkit-transform":"rotate(0deg)",transform:"rotate(0deg)"})}});o.exports=e}),PP.define("gb/widget/countdown2",function(t,i,o){var e=t("gb/widget/audio_player"),s=_.Class.extend({construct:function(t){this.conf=$.extend({$el:null,bgm:null},t),this.init()},init:function(){this.originTime=3,this.startTime=this.originTime,this.totalTime=10*this.originTime,this.timer=null,this.countMs=10,this.countChange=0,this.audio=new e({src:this.conf.bgm,autoplay:!1,loop:!1}),this.listenEvent()},listenEvent:function(){_.eventCenter.on("gb_widget_countdown2:start",$.proxy(this.start,this)),_.eventCenter.on("gb_widget_countdown2:pause",$.proxy(this.pause,this)),_.eventCenter.on("gb_widget_countdown2:reset",$.proxy(this.reset,this))},start:function(){var t=5600/750;this.audio.play(),setTimeout($.proxy(function i(){return this.totalTime-=1,this.totalTime<0?(this.conf.$el.find(".countdown2_txt").css({"background-position":"0 -"+t*this.countChange+"rem"}),clearTimeout(this.timer),this.countMs=10,this.countChange=0,void _.eventCenter.trigger("gb_widget_countdown2:timeisup")):(this.totalTime>=0&&this.countMs>0&&this.countMs--,0===this.countMs&&this.startTime>0&&(this.countMs=10,this.startTime--,this.countChange++,this.conf.$el.find(".countdown2_txt").css({"background-position":"0 -"+t*this.countChange+"rem"}),this.audio.stop(),this.audio.play()),void(this.timer=setTimeout($.proxy(i,this),100)))},this),100)},pause:function(){clearTimeout(this.timer)},reset:function(){clearTimeout(this.timer),this.originTime=3,this.startTime=this.originTime,this.totalTime=10*this.originTime,this.timer=null,this.conf.$el.find(".countdown2_txt").css({"background-position":"0 0"})}});o.exports=s}),PP.define("gb/widget/lottery",function(t,i,o){function e(){var t,i=n.get("skey");return t=null==i?"":s(i)}function s(t){t=void 0!=t?t:"";for(var i=0,o=t.length,e=5381;o>i;++i)e+=(e<<5)+t.charAt(i).charCodeAt();return 2147483647&e}var n=t("cookie"),a={createActive:"http://act.paipai.com/promotion/active/createActiveInst",playActive:"http://act.paipai.com/promotion/active/playActiveInst",shareActive:"http://act.paipai.com/promotion/active/player/shareActiveInst",visitReport:"http://act.paipai.com/promotion/access/ipInfo",actionReport:"http://act.paipai.com/promotion/access/actionInfo"},r=n.get("wg_uin")||n.get("p_uin")||n.get("uin"),c=null,p={init:function(t,i){var o=$.extend({actId:"",_active_p:2,g_tk:e(),g_ty:"j132",_:(new Date).getTime()},t),s=this;$.ajax({url:a.createActive,data:o,type:"GET",dataType:"jsonp",timeout:5e3,success:function(t){console.log("init active ajax success"),t&&t.token&&(c=t.token),i&&i(t),s.actReport(a.visitReport,o.actId)},error:function(t,o,e){console.log("init active ajax error"),i&&i()}})},play:function(t,i){var o=$.extend({actId:"",_active_p:2,token:c,g_tk:e(),g_ty:"j132",_:(new Date).getTime()},t);console.log(o),$.ajax({url:a.playActive,data:o,type:"GET",dataType:"jsonp",timeout:5e3,success:function(t){console.log("play ajax success"),i&&i(t)},error:function(t,o,e){console.log("play ajax error"),i&&i()}})},share:function(t,i){var o=$.extend({actId:"",_active_p:2,token:c,type:1,g_tk:e(),g_ty:"j132",_:(new Date).getTime()},t),s=this;console.log(o),$.ajax({url:a.shareActive,data:o,type:"GET",dataType:"jsonp",timeout:5e3,success:function(t){console.log("share ajax success"),i&&i(t),s.actReport(a.actionReport,o.actId)},error:function(t,o,e){console.log("share ajax error"),i&&i()}})},actReport:function(t,i){$.ajax({url:t,data:{uin:r,type:1,actId:i,token:c,refer:window.location.href,_:(new Date).getTime()},dataType:"jsonp",type:"GET",timeout:5e3,success:function(t){console.log(t)},error:function(t,i,o){}})}};o.exports=p}),PP.define("gb/widget/lottery_dialog",function(t,i,o){var e=_.Class.extend({construct:function(t){this.conf=$.extend({container:"body",content:"",extClass:null,url:null},t)},win:function(t,i,o,e){if(!this.$win){var s='<div class="mod_popup win">';s+='<div class="mod_popup_body mod_popup_imgs">',s+='<div class="mod_popup_xiu mod_popup_imgs"></div>',s+='<div class="mod_popup_yqsex mod_popup_imgs"></div>',s+='<div class="mod_popup_main mod_popup_win mod_popup_imgs">',s+='<div class="mod_popup_txt"><b>'+t+"</b>元的"+i+"</div>",s+=o?'<div class="mod_popup_tip"><span>限<b>'+o+"</b>使用</span></div>":'<div class="mod_popup_tip"><span>全平台通用</span></div>',s+="</div>",s+='<div class="mod_popup_btn"><a href="javascript:;" class="mod_popup_imgs"><span>到'+(o?"店铺":"首页")+"找好货</span></a></div>",s+='<div class="mod_popup_star mod_popup_imgs"></div>',s+='<a href="javascript:;" class="mod_popup_close"></a>',s+="</div>",s+="</div>",this.$win=$(s),this.$win.appendTo($(this.conf.container)).on("tap",".mod_popup_close",$.proxy(function(){this.$win.removeClass("in").off().remove(),this.$win=null},this))}this.$win.addClass("in")},lose:function(t,i){if(!this.$lose){var o="";o=t?"没有抓到娃娃嘞，运气真差~":"什么？没有中！？";var e='<div class="mod_popup lose">';e+='<div class="mod_popup_body mod_popup_imgs">',e+='<div class="mod_popup_main mod_popup_lose mod_popup_imgs">',e+='<div class="mod_popup_lose_inner">',e+='<div class="mod_popup_leaf mod_popup_leaf1 mod_popup_imgs"></div>',e+='<div class="mod_popup_leaf mod_popup_leaf2 mod_popup_imgs"></div>',e+='<div class="mod_popup_line mod_popup_imgs"></div>',e+='<div class="mod_popup_cry mod_popup_imgs"></div>',e+='<div class="mod_popup_losetip">'+o+"</div>",e+="</div>",e+="</div>",e+='<div class="mod_popup_btn"><a href="javascript:;" class="mod_popup_imgs"><span>换个姿势再来一次</span></a></div>',e+='<a href="javascript:;" class="mod_popup_close"></a>',e+="</div>",e+="</div>",this.$lose=$(e),this.$lose.appendTo($(this.conf.container)).on("tap",".mod_popup_close",$.proxy(function(){this.$lose.removeClass("in").off().remove(),this.$lose=null},this)).on("tap",".mod_popup_btn",$.proxy(function(o){o&&o.preventDefault(),t?(this.$lose.removeClass("in").off().remove(),this.$lose=null,i&&i()):window.location.reload()},this))}this.$lose.addClass("in")}});o.exports=e}),PP.define("gb/widget/login",function(t,i,o){var e=t("cookie"),s=t("util"),n=t("uri"),a=new n(window.location.href),r=a.getQueryParamValue("sid")?a.getQueryParamValue("sid"):document.referrer.match(/sid=([^&]*)/i)?document.referrer.match(/sid=([^&]*)/i)[1]:e.get("sid")?e.get("sid"):"",c=function(){var t=e.get("uin")?parseInt((e.get("uin")+"").replace("o",""),10):"",i=e.get("wg_uin")?parseInt((e.get("wg_uin")+"").replace("o",""),10):"",o=e.get("skey")?e.get("skey")+"":"",s=e.get("wg_skey")?e.get("skey")+"":"";return t&&o&&t==i&&o==s?!0:!1},p=function(t){c()||u(t)},u=function(t){var i=s.isWX(),o=(s.isMQQ,s.isPaiSns()),n=t||window.location.href,a="_reloginTimes",c=parseInt(localStorage.getItem(a),10);!isNaN(c)&&c>0?c:0;i?window.location.href="http://b.paipai.com/mlogin/tws64/m/wxv2/Login?appid=1&rurl="+encodeURIComponent(n):o?window.location.href="paipai://jump/login":window.location.href="http://b.paipai.com/mlogin/tws64/m/h5v1/cpLogin?rurl="+encodeURIComponent(n)+"&sid="+r+"&uk="+e.get("uk")};o.exports={checkAndRedirect:p,checkLogin:c,gotoLogin:u}}),PP.define("gb/widget/loading",function(t,i,o){var e=_.Class.extend({construct:function(t){this.conf=$.extend({container:$("body")},this),this.init()},init:function(){var t="";this.$loading||(t='<div class="mod_loading">',t+='<div class="mod_loading_inner">',t+='<i class="mod_loading_icon"></i> 正在加载，请稍候…',t+="</div>",t+="</div>",this.$loading=$(t).appendTo(this.conf.container).hide())},show:function(){this.$loading&&this.$loading.show()},hide:function(){this.$loading&&this.$loading.hide()},destroy:function(){this.$loading&&this.$loading.remove()}});o.exports=e});