!function(t,e){"function"==typeof define&&define.amd?define(function(){return e(t,t.document)}):"undefined"!=typeof module&&module.exports?module.exports=e(t,t.document):t.Shake=e(t,t.document)}("undefined"!=typeof window?window:this,function(t,e){"use strict";function i(i){if(this.hasDeviceMotion="ondevicemotion"in t,this.options={threshold:15,timeout:1e3},"object"==typeof i)for(var s in i)i.hasOwnProperty(s)&&(this.options[s]=i[s]);if(this.lastTime=new Date,this.lastX=null,this.lastY=null,this.lastZ=null,"function"==typeof e.CustomEvent)this.shakeEvent=new e.CustomEvent("shake",{bubbles:!0,cancelable:!0}),this.unShakeEvent=new e.CustomEvent("unshake",{bubbles:!0,cancelable:!0});else{if("function"!=typeof e.createEvent)return!1;this.shakeEvent=e.createEvent("Event"),this.shakeEvent.initEvent("shake",!0,!0),this.unShakeEvent=e.createEvent("Event"),this.unShakeEvent.initEvent("unshake",!0,!0)}}return i.prototype.reset=function(){this.lastTime=new Date,this.lastX=null,this.lastY=null,this.lastZ=null},i.prototype.start=function(){this.reset(),this.hasDeviceMotion&&t.addEventListener("devicemotion",this,!1)},i.prototype.stop=function(){this.hasDeviceMotion&&t.removeEventListener("devicemotion",this,!1),this.reset()},i.prototype.devicemotion=function(e){var i,s,n=e.accelerationIncludingGravity,o=0,h=0,a=0;return null===this.lastX&&null===this.lastY&&null===this.lastZ?(this.lastX=n.x,this.lastY=n.y,void(this.lastZ=n.z)):(o=Math.abs(this.lastX-n.x),h=Math.abs(this.lastY-n.y),a=Math.abs(this.lastZ-n.z),o>this.options.threshold&&h>this.options.threshold||o>this.options.threshold&&a>this.options.threshold||h>this.options.threshold&&a>this.options.threshold?(i=new Date,s=i.getTime()-this.lastTime.getTime(),s>this.options.timeout&&(t.dispatchEvent(this.shakeEvent),this.lastTime=new Date)):(i=new Date,s=i.getTime()-this.lastTime.getTime(),s>1e3&&(t.dispatchEvent(this.unShakeEvent),this.lastTime=new Date)),this.lastX=n.x,this.lastY=n.y,void(this.lastZ=n.z))},i.prototype.handleEvent=function(t){return"function"==typeof this[t.type]?this[t.type](t):void 0},i});