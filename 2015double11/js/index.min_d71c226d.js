"use strict";PP.define("2015double11/page/index",function(e,a,t){var n,s,i,r,o,g,_,u,c,p=e("gb/widget/audio_player"),l=$(window),m=$(".loading"),d=$("#chrymnum"),f=$(".menu"),h=$(".enter"),b=$(".mod_container"),v=$(".page"),w=$(".sub_page"),x=$(".music"),k=$(".page_main"),y=$(".wrap"),C=$(".select"),Y=$(".back_btn"),T=$(".section"),q=$(".section .page"),D=4,I=[],z=["/xgames/2015double11/images/music_271b14fb.png","/xgames/2015double11/images/loading_sp_ac8f3040.png","/xgames/2015double11/images/page_bg_a24b85be.png","/xgames/2015double11/images/menu_bg_1592f45f.png","/xgames/2015double11/images/menu_title_ca8f52e9.png","/xgames/2015double11/images/menu_words_a400cccd.png","/xgames/gb/images/bowl.png","/xgames/2015double11/images/aunt_auntie_2e50015e.png","/xgames/2015double11/images/aunt_page1_bg_c9875818.png","/xgames/2015double11/images/aunt_page1_sp_a9ce1ddf.png","/xgames/2015double11/images/page0_boy_067be99c.png","/xgames/2015double11/images/page0_bg_08a9f0b7.png","/xgames/2015double11/images/page0_boy_eye_8bdb5ca0.png","/xgames/2015double11/images/page0_boy_slobber_5000d5c4.png","/xgames/2015double11/images/page0_bubble_13e1ede4.png","/xgames/2015double11/images/page0_heart_f1ba4228.png","/xgames/2015double11/images/page0_lady1_377f2117.png","/xgames/2015double11/images/page0_lady2_ab82ef59.png","/xgames/2015double11/images/page0_txt_277f330e.png","/xgames/2015double11/images/page0_txther_1596d98d.png","/xgames/2015double11/images/cat_page0_cat_5785e02e.png","/xgames/2015double11/images/cat_page0_bg_0eb434cb.png","/xgames/2015double11/images/cat_page0_cat2_9af9396b.png","/xgames/2015double11/images/cat_page0_food_cdb8779f.png","/xgames/2015double11/images/cat_page0_txt_7bf3b16a.png","/xgames/2015double11/images/deliver_girl_b97fd7ae.png","/xgames/2015double11/images/deliver_page1_char_0680a713.png","/xgames/2015double11/images/deliver_page1_sp_20c5366e.png","/xgames/2015double11/images/subpage_bg_95ffdb11.png","/xgames/2015double11/images/gb_sp_b0111c85.png","/xgames/2015double11/images/promote_words_a63145cd.png","/xgames/2015double11/images/share_man_420537b7.png"];Array.prototype.each=function(e,a){var t,n=this.length,s=0,i=function(){++s===n&&a&&a.call(this)};for(t=0;n>t;t++)e.call(this,this[t],t,i)};var P=function(e,a,t){var n=e.length,s=0,i=[],a=a?a:function(){};e.each(function(e,a,r){var o;o=new Image,o.src=e,o.complete?(i[a]=o,s++,t&&t((s/n*100).toString().split(".")[0]),r()):o.onload=function(){i[a]=o,s++,t&&t((s/n*100).toString().split(".")[0]),r()}},a.bind(this,i))},M=function(e){var a=parseInt(e);I.push(a)},S=function(){},A=function(){var e=d,a=0,t=setInterval(function(){if(I.length>0){var n=I[0];a+=Math.ceil((n-a)/5)+1,n>=a?e.text(a):I.shift(),a>=100&&(clearInterval(t),e.text(100),setTimeout(E,200))}})},j=function(){_=l.width(),u=l.height(),c=u-60;var e=_>640?640:_,a=u;b.width(e),v.width(e),b.height(a),v.height(a),w.height(a-60),F()},B=function(){g=0,o="stay",f.attr("class","page menu").css({"z-index":"11"}),y.css({display:"none"}),k.removeClass("on").css({"-webkit-transform":"translateY(0)"}),q.removeClass("on").removeClass("next").addClass("out"),T.css({"-webkit-transform":"translateY("+u+"px)"})},E=function(){m.css({"-webkit-transform":"translateY(-100%)"}),setTimeout(function(){m.css({display:"none"})},200),f.css({"-webkit-transform":"translateY(0)"})};l.on("resize",function(){j()}),$("body").on("touchmove",function(e){e.preventDefault()});var F=function(){B(),T.on("touchstart",function(e){G(e.changedTouches[0],this)}).on("touchmove",function(e){H(e.changedTouches[0],this)}).on("touchend",function(e){J(e.changedTouches[0],this)})},G=function(e,a){$(a);event.preventDefault(),r=-g*c,s=e.pageY},H=function(e,a){var t=$(a);event.preventDefault(),i=e.pageY,L()||(i>=s?K(t,"backward"):s>i&&K(t,"forward"))},J=function(e,a){var t,n=$(a);event.preventDefault(),i=e.pageY,console.log(g),L()||(t=Math.abs(i-s),n.removeClass("drag"),50>=t&&t>0&&i>s?N(n,g,"keep-backward"):50>=t&&t>0&&s>i?N(n,g,"keep-forward"):t>50&&i>s?N(n,g-1,"backward"):(t>50&&s>i||0===t)&&N(n,g+1,"forward"))},K=function(e,a){var t=r+i-s;e.css("-webkit-transform","translateY("+t+"px)")},L=function(){return i>s&&0===g||s>=i&&g===D-1?!0:!1},N=function(e,a,t){var s;e.children(".page");g=a,s=g*-c,e.css({"-webkit-transform":"translateY("+s+"px)"}),$("#"+n+"_"+a).removeClass("out").removeClass("next").addClass("on"),g<q.length-2&&$("#"+n+"_"+(a+1)).addClass("next")};h.on("touchstart",function(){var e=$(this).attr("data-class");B(),f.addClass("menu_fold "+e),setTimeout(function(){f.css("z-index","-1")},400),$("#"+e).css("display","block"),$("#"+e+" .page_main").addClass("on")}),C.on("touchstart",function(){n=$(this).attr("data-class");var e=$(this).attr("data-selection"),a=$("."+n+" .section .sub_page"),t=a.height();"2"===e?(a.eq(0).css({"-webkit-transform":"translateY("+t+"px)"}).attr("id",n+"_1"),a.eq(1).css({"-webkit-transform":"translateY(-"+t+"px)"}).attr("id",n+"_0")):(a.eq(0).css({"-webkit-transform":"translateY(0px)"}).attr("id",n+"_0"),a.eq(1).css({"-webkit-transform":"translateY(0px)"}).attr("id",n+"_1")),$("#"+n+" .select").removeClass("select_on"),$(this).addClass("select_on"),setTimeout(function(){k.css({"-webkit-transform":"translateY(-"+l.height()+"px)"}),$("#"+n+" .section").css({"-webkit-transform":"translateY(0px)"}),$("#"+n+"_"+g).removeClass("out").addClass("on"),$("#"+n+"_"+(g+1)).addClass("next")},200)}),Y.on("touchend",function(){B()}),j(),A(),P(z,S,M);var O=new p({src:"/xgames/2015double11/images/bgm_9f755608.mp3",autoplay:!1});x.on("touchstart",function(){O.togglePlay(),x.toggleClass("music_off")})});